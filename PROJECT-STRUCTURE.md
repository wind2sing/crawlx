# CrawlX 2.0 é¡¹ç›®ç»“æ„

## ğŸ“ ç›®å½•ç»“æ„

```
crawlx/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ crawlx.ts      # ä¸»çˆ¬è™«ç±»
â”‚   â”‚   â”œâ”€â”€ crawlx.test.ts # æ ¸å¿ƒæµ‹è¯•
â”‚   â”‚   â””â”€â”€ plugin.ts      # æ’ä»¶åŸºç±»å’Œç®¡ç†å™¨
â”‚   â”œâ”€â”€ parser/            # è§£æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ parser.ts      # ä¸»è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ filters.ts     # å†…ç½®è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ cheerio-extensions.ts # Cheerioæ‰©å±•
â”‚   â”‚   â””â”€â”€ parser.test.ts # è§£æå™¨æµ‹è¯•
â”‚   â”œâ”€â”€ http/              # HTTPå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ http-client.ts # HTTPå®¢æˆ·ç«¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ lightweight-client.ts # è½»é‡çº§å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ high-performance-client.ts # é«˜æ€§èƒ½å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ http-client.test.ts # HTTPæµ‹è¯•
â”‚   â”œâ”€â”€ scheduler/         # ä»»åŠ¡è°ƒåº¦
â”‚   â”‚   â”œâ”€â”€ task-scheduler.ts # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”‚   â”œâ”€â”€ priority-queue.ts # ä¼˜å…ˆçº§é˜Ÿåˆ—
â”‚   â”‚   â””â”€â”€ scheduler.test.ts # è°ƒåº¦å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ plugins/           # å†…ç½®æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ parse-plugin.ts # è§£ææ’ä»¶
â”‚   â”‚   â”œâ”€â”€ follow-plugin.ts # è·Ÿè¸ªæ’ä»¶
â”‚   â”‚   â”œâ”€â”€ retry-plugin.ts # é‡è¯•æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ delay-plugin.ts # å»¶è¿Ÿæ’ä»¶
â”‚   â”‚   â”œâ”€â”€ duplicate-filter-plugin.ts # å»é‡æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ rate-limit-plugin.ts # é™é€Ÿæ’ä»¶
â”‚   â”‚   â””â”€â”€ plugins.test.ts # æ’ä»¶æµ‹è¯•
â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ config.ts      # é…ç½®ç±»
â”‚   â”‚   â”œâ”€â”€ config-factory.ts # é…ç½®å·¥å‚
â”‚   â”‚   â”œâ”€â”€ config-presets.ts # é…ç½®é¢„è®¾
â”‚   â”‚   â”œâ”€â”€ schema.ts      # é…ç½®Schema
â”‚   â”‚   â””â”€â”€ config.test.ts # é…ç½®æµ‹è¯•
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ factory.ts     # å·¥å‚å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ logger.ts      # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ errors.ts      # é”™è¯¯ç±»å‹
â”‚   â”‚   â”œâ”€â”€ url-utils.ts   # URLå·¥å…·
â”‚   â”‚   â””â”€â”€ utils.test.ts  # å·¥å…·æµ‹è¯•
â”‚   â”œâ”€â”€ types/             # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts       # ä¸»è¦ç±»å‹
â”‚   â””â”€â”€ index.ts           # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ helpers/           # æµ‹è¯•å·¥å…·
â”‚   â”‚   â””â”€â”€ test-utils.ts  # æµ‹è¯•è¾…åŠ©å‡½æ•°
â”‚   â”œâ”€â”€ integration/       # é›†æˆæµ‹è¯•
â”‚   â”‚   â””â”€â”€ crawlx.integration.test.ts
â”‚   â”œâ”€â”€ performance/       # æ€§èƒ½æµ‹è¯•
â”‚   â”‚   â””â”€â”€ performance.test.ts
â”‚   â””â”€â”€ e2e/              # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚       â””â”€â”€ end-to-end.test.ts
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ api/              # APIæ–‡æ¡£
â”‚   â”‚   â””â”€â”€ README.md     # APIå‚è€ƒ
â”‚   â”œâ”€â”€ guide/            # ä½¿ç”¨æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ getting-started.md # å¿«é€Ÿå¼€å§‹
â”‚   â”‚   â”œâ”€â”€ examples.md   # é«˜çº§ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ plugins.md    # æ’ä»¶å¼€å‘
â”‚   â”‚   â””â”€â”€ performance.md # æ€§èƒ½è°ƒä¼˜
â”‚   â””â”€â”€ README.md         # æ–‡æ¡£ç´¢å¼•
â”œâ”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ basic-usage.ts    # åŸºç¡€ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ scripts/               # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ run-tests.ts      # æµ‹è¯•è¿è¡Œå™¨
â”‚   â””â”€â”€ test-build.ts     # æ„å»ºæµ‹è¯•
â”œâ”€â”€ package.json           # åŒ…é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â”œâ”€â”€ vitest.config.ts      # æµ‹è¯•é…ç½®
â”œâ”€â”€ tsup.config.ts        # æ„å»ºé…ç½®
â”œâ”€â”€ CHANGELOG.md          # å˜æ›´æ—¥å¿—
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ ¸å¿ƒæ¨¡å— (src/core/)
- **CrawlX**: ä¸»çˆ¬è™«ç±»ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶
- **Plugin**: æ’ä»¶åŸºç±»å’Œç®¡ç†å™¨ï¼Œæä¾›æ‰©å±•èƒ½åŠ›

### è§£æå¼•æ“ (src/parser/)
- **Parser**: CSSé€‰æ‹©å™¨è§£æå™¨
- **Filters**: å†…ç½®è¿‡æ»¤å™¨ï¼ˆtrimã€numberã€dateç­‰ï¼‰
- **CheerioExtensions**: CheerioåŠŸèƒ½æ‰©å±•

### HTTPå®¢æˆ·ç«¯ (src/http/)
- **HttpClient**: å®¢æˆ·ç«¯æ¥å£
- **LightweightClient**: è½»é‡çº§å®ç°
- **HighPerformanceClient**: é«˜æ€§èƒ½å®ç°

### ä»»åŠ¡è°ƒåº¦ (src/scheduler/)
- **TaskScheduler**: ä»»åŠ¡è°ƒåº¦å™¨
- **PriorityQueue**: ä¼˜å…ˆçº§é˜Ÿåˆ—å®ç°

### æ’ä»¶ç³»ç»Ÿ (src/plugins/)
- **ParsePlugin**: æ•°æ®è§£æ
- **FollowPlugin**: é“¾æ¥è·Ÿè¸ª
- **RetryPlugin**: é‡è¯•æœºåˆ¶
- **DelayPlugin**: è¯·æ±‚å»¶è¿Ÿ
- **DuplicateFilterPlugin**: URLå»é‡
- **RateLimitPlugin**: é€Ÿç‡é™åˆ¶

### é…ç½®ç®¡ç† (src/config/)
- **Config**: é…ç½®ç±»
- **ConfigFactory**: é…ç½®å·¥å‚
- **ConfigPresets**: é¢„è®¾é…ç½®
- **Schema**: é…ç½®éªŒè¯

### å·¥å…·å‡½æ•° (src/utils/)
- **Factory**: å·¥å‚å‡½æ•°
- **Logger**: æ—¥å¿—ç³»ç»Ÿ
- **Errors**: é”™è¯¯ç±»å‹
- **UrlUtils**: URLå·¥å…·

## ğŸ”§ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript 5.3+
- **è¿è¡Œæ—¶**: Node.js 16+
- **è§£æ**: Cheerio (HTMLè§£æ)
- **HTTP**: Undici (é«˜æ€§èƒ½HTTPå®¢æˆ·ç«¯)
- **æµ‹è¯•**: Vitest (å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•)
- **æ„å»º**: tsup (ç°ä»£åŒ–æ„å»ºå·¥å…·)
- **ä»£ç è´¨é‡**: ESLint + Prettier

## ğŸ“¦ æ„å»ºè¾“å‡º

```
dist/
â”œâ”€â”€ index.js          # CommonJSå…¥å£
â”œâ”€â”€ index.mjs         # ESMå…¥å£
â”œâ”€â”€ index.d.ts        # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ ...               # å…¶ä»–æ„å»ºæ–‡ä»¶
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

- **å•å…ƒæµ‹è¯•**: æ¯ä¸ªæ¨¡å—çš„ `.test.ts` æ–‡ä»¶
- **é›†æˆæµ‹è¯•**: `tests/integration/` ç›®å½•
- **æ€§èƒ½æµ‹è¯•**: `tests/performance/` ç›®å½•
- **ç«¯åˆ°ç«¯æµ‹è¯•**: `tests/e2e/` ç›®å½•
- **æµ‹è¯•å·¥å…·**: `tests/helpers/` ç›®å½•

## ğŸ“š æ–‡æ¡£ç»“æ„

- **APIæ–‡æ¡£**: å®Œæ•´çš„APIå‚è€ƒ
- **ä½¿ç”¨æŒ‡å—**: ä»å…¥é—¨åˆ°é«˜çº§çš„ä½¿ç”¨æŒ‡å—
- **ç¤ºä¾‹ä»£ç **: å®é™…ä½¿ç”¨åœºæ™¯çš„ç¤ºä¾‹
- **å¼€å‘æŒ‡å—**: æ’ä»¶å¼€å‘å’Œè´¡çŒ®æŒ‡å—

## ğŸš€ å¼€å‘å·¥ä½œæµ

1. **å¼€å‘**: `npm run dev` - è¿è¡Œç¤ºä¾‹
2. **æµ‹è¯•**: `npm run test` - è¿è¡Œæ‰€æœ‰æµ‹è¯•
3. **æ„å»º**: `npm run build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
4. **ç±»å‹æ£€æŸ¥**: `npm run typecheck` - TypeScriptç±»å‹æ£€æŸ¥
5. **ä»£ç æ ¼å¼**: `npm run format` - ä»£ç æ ¼å¼åŒ–
6. **ä»£ç æ£€æŸ¥**: `npm run lint` - ESLintæ£€æŸ¥

è¿™ä¸ªé¡¹ç›®ç»“æ„ä½“ç°äº†ç°ä»£TypeScripté¡¹ç›®çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ã€å®Œæ•´çš„æµ‹è¯•è¦†ç›–ã€è¯¦ç»†çš„æ–‡æ¡£å’Œç°ä»£åŒ–çš„å·¥å…·é“¾ã€‚
